---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";
import { getCollection } from "astro:content";
import FormattedDate from "../components/FormattedDate.astro";
import RootLayout from "../layouts/RootLayout.astro";

const posts = (await getCollection("blog")).sort(
    (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<RootLayout>
    <div class="px-5 md:px-0 flex flex-col gap-5">
        {
            posts.map((post) => (
                <div class=" border-b ">
                    <div class="flex justify-between my-3">
                        <a href="/" class="p-1 rounded text-sm bg-blue-100">
                            Article
                        </a>
                        <p class="text-sm text-gray-900">
                            <FormattedDate date={post.data.pubDate} />
                        </p>
                    </div>
                    <div>
                        <a href={`/blog/${post.slug}/`}>
                            <h1 class="text-3xl font-bold">
                                {post.data.title}
                            </h1>

                            <p class="text-slate-500">
                                {post.data.description}
                            </p>
                        </a>
                    </div>
                    <div class="py-3 flex items-center justify-between">
                        <div class="flex gap-2 items-center">
                            <img
                                class="h-8 w-8 rounded-full"
                                src="https://avatars.githubusercontent.com/u/2856254?v=4"
                                alt=""
                            />
                            <p class="font-semibold">Achour Meguenni</p>
                        </div>
                        <a href={`/blog/${post.slug}/`} class="text-indigo-600">
                            Read more <i class="bi bi-arrow-right" />
                        </a>
                    </div>
                </div>
            ))
        }
    </div>
</RootLayout>
